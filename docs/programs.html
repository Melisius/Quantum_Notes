

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Programs &mdash; Quantum Notes  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Quantum Notes  documentation" href="index.html"/>
        <link rel="prev" title="Response Theory" href="response.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Quantum Notes
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Content</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mcscfsrdft.html">MCSCF-srDFT</a></li>
<li class="toctree-l1"><a class="reference internal" href="mcsrdftresponse.html">MCSCF-srDFT response</a></li>
<li class="toctree-l1"><a class="reference internal" href="justmath.html">Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="operatorexamples.html">Quantum operator examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="H_F_Dmatrix.html">Hamiltonian, Fock and Density Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="dft.html">Density Functional Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="mcscf.html">Multi-Configurational Self-Consistent Field</a></li>
<li class="toctree-l1"><a class="reference internal" href="response.html">Response Theory</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Programs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#amber">Amber</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#resp-charges">RESP charges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-para-nitrophenolate">Example - para-nitrophenolate</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#cpmd">CPMD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parallelization">Parallelization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-48-water">Example - 48 Water</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vmd">VMD</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#set-periodic-boundary-conditions">Set periodic boundary conditions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Quantum Notes</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Programs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/programs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="programs">
<h1>Programs<a class="headerlink" href="#programs" title="Permalink to this headline">¶</a></h1>
<div class="section" id="amber">
<h2>Amber<a class="headerlink" href="#amber" title="Permalink to this headline">¶</a></h2>
<p>A section with some notes about the <a class="reference external" href="http://ambermd.org/">Amber</a> program.</p>
<div class="section" id="resp-charges">
<h3>RESP charges<a class="headerlink" href="#resp-charges" title="Permalink to this headline">¶</a></h3>
<p>Most organic molecules are not explicitly included in the force fields use in Amber.
For these kinds of molecules the GAFF in Amber can be used.
This force field includes all the bonded and the Lennard-Jones parameters.
Thus when using these kind of general force field, charges are still needed to account for the electrostatic interactions.
In Amber these charges can be found by doing a restrained electrostatic potential fit (RESP).
RESP can be done using Antechamber, which is a part of the Amber program.
The RESP calculation in Antechamber requires an electro static potential (ESP).
This ESP can be calculated using Gaussian, which then produces a file that can immediately be used by Antechamber.
A minimal Gaussian input file, used to make an ESP for RESP can be seen below:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="p">%</span><span class="n">NProcShared</span><span class="o">=</span><span class="s2">&quot;NUMBER PROCESSES&quot;</span>
<span class="p">%</span><span class="n">mem</span><span class="o">=</span><span class="s2">&quot;AMOUNT MEMORY&quot;</span><span class="n">MB</span>
<span class="p">%</span><span class="n">chk</span><span class="o">=</span><span class="s2">&quot;PATH TO SAVE CHK FILE&quot;</span>
<span class="cp">#p HF/6-31G* SCF=Tight Pop=MK IOp(6/50=1)</span>

 <span class="s2">&quot;SOME TITLE&quot;</span>

<span class="s2">&quot;CHARGE&quot;</span> <span class="s2">&quot;MULTIPLICITY&quot;</span>
<span class="s2">&quot;ATOM&quot;</span>         <span class="s2">&quot;X&quot;</span>        <span class="s2">&quot;Y&quot;</span>       <span class="s2">&quot;Z&quot;</span>
<span class="s2">&quot;...&quot;</span>

<span class="s2">&quot;NAME OF ESP FOR ANTECHAMBER&quot;</span><span class="p">.</span><span class="n">gesp</span>
</pre></div>
</div>
<p>Everything in ” ” should be replaced with something user defined (including the ” “).
For GAFF the method should be Hartree-Fock with the basis set 6-31G*.
This is used to be consistent with the rest of the force field parameters.
The setting IOp(6/50=1) specifies that the ESP should be printed in a format accepted by Antechamber.
The printed ESP is the “.gesp” file.
Before doing an ESP calculation it is advised to do a geometry optimization with HF/6-31G*.
If metal sites are present B3LYP/6-31G* should be used instead.
For ESP calculations other useful settings are:</p>
<p>IOp(6/41=N), sets the number of layers for which the ESP is calculated.
Default is N = 4.
The chosen value must be 4 or above.
I.e. N ≤ 4.</p>
<p>IOp(6/42=N), sets the density of points per area of the ESP.
Default is N = 1.</p>
<p>IOp(6/43=N), sets the increment between ESP layers.
Default is <span class="math notranslate">\(\frac{0.4}{\sqrt{\mathrm{layer\ index}}}\)</span>.
If N is user defined, the increments will be 0.01*N.</p>
<p>If more than one IOp setting is used, is specified as:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">IOp</span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">41</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="o">/</span><span class="mi">42</span><span class="o">=</span><span class="mi">17</span><span class="p">,</span><span class="mi">6</span><span class="o">/</span><span class="mi">50</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>I.e. IOp is just specified once, with all the settings inside.
Setting IOp(6/41=10) and IOp(6/42=17) is [recommended settings](<a class="reference external" href="http://signe.teokem.lu.se/~ulf/Methods/resp.html">http://signe.teokem.lu.se/~ulf/Methods/resp.html</a>).
Now that the “.gesp” file have been produced, the RESP charges can be calculated with Antechamber by the following command:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">antechamber</span> <span class="o">-</span><span class="n">i</span> <span class="s2">&quot;ESP FILE&quot;</span><span class="p">.</span><span class="n">gesp</span> <span class="o">-</span><span class="n">fi</span> <span class="n">gesp</span> <span class="o">-</span><span class="n">o</span> <span class="s2">&quot;OUTPUT FILE&quot;</span><span class="p">.</span><span class="n">mol2</span> <span class="o">-</span><span class="n">fo</span> <span class="n">mol2</span> <span class="o">-</span><span class="n">c</span> <span class="n">resp</span>
</pre></div>
</div>
<p>This will produce a mol2 file, where the charges can be found in last column for each atom.</p>
<div class="section" id="example-para-nitrophenolate">
<h4>Example - para-nitrophenolate<a class="headerlink" href="#example-para-nitrophenolate" title="Permalink to this headline">¶</a></h4>
<p>Here is an example with para-nitrophenolate of calculating the ESP file needed in Antechamber.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="p">%</span><span class="n">NProcShared</span><span class="o">=</span><span class="mi">12</span>
<span class="p">%</span><span class="n">mem</span><span class="o">=</span><span class="mi">20000</span><span class="n">MB</span>
<span class="p">%</span><span class="n">chk</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">erik</span><span class="o">/</span><span class="n">AmberRuns</span><span class="o">/</span><span class="n">PNP1</span><span class="o">/</span><span class="n">Resp</span><span class="o">/</span><span class="n">PNP1resp</span><span class="p">.</span><span class="n">chk</span>
<span class="cp">#p HF/6-31G* SCF=Tight Pop=MK IOp(6/41=10,6/42=17,6/50=1)</span>

 <span class="n">PNP1</span> <span class="n">RESP</span>

<span class="o">-</span><span class="mi">1</span> <span class="mi">1</span>
<span class="n">C</span>          <span class="mf">0.00000</span>        <span class="mf">1.22448</span>        <span class="mf">1.40664</span>
<span class="n">C</span>          <span class="mf">0.00000</span>        <span class="mf">1.21586</span>        <span class="mf">0.05197</span>
<span class="n">C</span>          <span class="mf">0.00000</span>        <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">0.66739</span>
<span class="n">C</span>          <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">1.21586</span>        <span class="mf">0.05197</span>
<span class="n">C</span>          <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">1.22448</span>        <span class="mf">1.40664</span>
<span class="n">C</span>          <span class="mf">0.00000</span>        <span class="mf">0.00000</span>        <span class="mf">2.19316</span>
<span class="n">O</span>          <span class="mf">0.00000</span>        <span class="mf">0.00000</span>        <span class="mf">3.41948</span>
<span class="n">N</span>          <span class="mf">0.00000</span>        <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">2.06029</span>
<span class="n">O</span>          <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">1.05965</span>       <span class="o">-</span><span class="mf">2.65602</span>
<span class="n">O</span>          <span class="mf">0.00000</span>        <span class="mf">1.05965</span>       <span class="o">-</span><span class="mf">2.65602</span>
<span class="n">H</span>          <span class="mf">0.00000</span>        <span class="mf">2.15260</span>        <span class="mf">1.95166</span>
<span class="n">H</span>          <span class="mf">0.00000</span>        <span class="mf">2.13693</span>       <span class="o">-</span><span class="mf">0.49934</span>
<span class="n">H</span>          <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">2.13693</span>       <span class="o">-</span><span class="mf">0.49934</span>
<span class="n">H</span>          <span class="mf">0.00000</span>       <span class="o">-</span><span class="mf">2.15260</span>        <span class="mf">1.95166</span>

<span class="n">PNP1resp</span><span class="p">.</span><span class="n">gesp</span>
</pre></div>
</div>
<p>After running Gaussian, the Antechamber command looks like the following for this example:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">antechamber</span> <span class="o">-</span><span class="n">i</span> <span class="n">PNP1resp</span><span class="p">.</span><span class="n">gesp</span> <span class="o">-</span><span class="n">fi</span> <span class="n">gesp</span> <span class="o">-</span><span class="n">o</span> <span class="n">PNP1</span><span class="p">.</span><span class="n">mol2</span> <span class="o">-</span><span class="n">fo</span> <span class="n">mol2</span> <span class="o">-</span><span class="n">c</span> <span class="n">resp</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cpmd">
<h2>CPMD<a class="headerlink" href="#cpmd" title="Permalink to this headline">¶</a></h2>
<p>A section about the <a class="reference external" href="http://www.cpmd.org/">CPMD</a> program.</p>
<div class="section" id="parallelization">
<h3>Parallelization<a class="headerlink" href="#parallelization" title="Permalink to this headline">¶</a></h3>
<p>In CPMD one of the things to keep an eye out for when trying to scale over multiple nodes is the number of planes.
The number of planes for a given system can be found in an output file, ran for any amount of time.</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">PARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARA</span>
 <span class="n">NCPU</span>     <span class="n">NGW</span>     <span class="n">NHG</span>  <span class="n">PLANES</span>  <span class="n">GXRAYS</span>  <span class="n">HXRAYS</span> <span class="n">ORBITALS</span> <span class="n">Z</span><span class="o">-</span><span class="n">PLANES</span>
        <span class="mi">0</span>    <span class="mi">3877</span>   <span class="mi">30927</span>       <span class="mi">6</span>     <span class="mi">166</span>     <span class="mi">654</span>       <span class="mi">5</span>       <span class="mi">1</span>
        <span class="mi">1</span>    <span class="mi">3875</span>   <span class="mi">30939</span>       <span class="mi">6</span>     <span class="mi">166</span>     <span class="mi">654</span>       <span class="mi">6</span>       <span class="mi">1</span>
        <span class="mi">2</span>    <span class="mi">3871</span>   <span class="mi">30935</span>       <span class="mi">6</span>     <span class="mi">166</span>     <span class="mi">654</span>       <span class="mi">5</span>       <span class="mi">1</span>
        <span class="mi">3</span>    <span class="mi">3871</span>   <span class="mi">30937</span>       <span class="mi">6</span>     <span class="mi">166</span>     <span class="mi">654</span>       <span class="mi">5</span>       <span class="mi">1</span>
        <span class="mi">4</span>    <span class="mi">3869</span>   <span class="mi">30935</span>       <span class="mi">6</span>     <span class="mi">166</span>     <span class="mi">654</span>       <span class="mi">6</span>       <span class="mi">1</span>
        <span class="mi">5</span>    <span class="mi">3868</span>   <span class="mi">30931</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">654</span>       <span class="mi">5</span>       <span class="mi">1</span>
        <span class="mi">6</span>    <span class="mi">3868</span>   <span class="mi">30923</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">654</span>       <span class="mi">5</span>       <span class="mi">1</span>
        <span class="mi">7</span>    <span class="mi">3870</span>   <span class="mi">30926</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">6</span>       <span class="mi">1</span>
        <span class="mi">8</span>    <span class="mi">3866</span>   <span class="mi">30924</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
        <span class="mi">9</span>    <span class="mi">3864</span>   <span class="mi">30916</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">10</span>    <span class="mi">3864</span>   <span class="mi">30926</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">6</span>       <span class="mi">1</span>
       <span class="mi">11</span>    <span class="mi">3862</span>   <span class="mi">30932</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">12</span>    <span class="mi">3862</span>   <span class="mi">30932</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">13</span>    <span class="mi">3866</span>   <span class="mi">30926</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">6</span>       <span class="mi">1</span>
       <span class="mi">14</span>    <span class="mi">3864</span>   <span class="mi">30930</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">15</span>    <span class="mi">3868</span>   <span class="mi">30922</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">16</span>    <span class="mi">3872</span>   <span class="mi">30932</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">6</span>       <span class="mi">1</span>
       <span class="mi">17</span>    <span class="mi">3870</span>   <span class="mi">30934</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">18</span>    <span class="mi">3870</span>   <span class="mi">30936</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">19</span>    <span class="mi">3868</span>   <span class="mi">30920</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">6</span>       <span class="mi">1</span>
       <span class="mi">20</span>    <span class="mi">3868</span>   <span class="mi">30910</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">21</span>    <span class="mi">3866</span>   <span class="mi">30930</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
       <span class="mi">22</span>    <span class="mi">3861</span>   <span class="mi">30854</span>       <span class="mi">6</span>     <span class="mi">163</span>     <span class="mi">655</span>       <span class="mi">6</span>       <span class="mi">1</span>
       <span class="mi">23</span>    <span class="mi">3860</span>   <span class="mi">30910</span>       <span class="mi">6</span>     <span class="mi">164</span>     <span class="mi">656</span>       <span class="mi">5</span>       <span class="mi">1</span>
                               <span class="n">G</span><span class="o">=</span><span class="mi">0</span> <span class="n">COMPONENT</span> <span class="n">ON</span> <span class="n">PROCESSOR</span> <span class="p">:</span>    <span class="mi">22</span>
<span class="n">PARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARAPARA</span>
</pre></div>
</div>
<p>The total number of planes is the sum of the column “PLANES”.
For the above this would be 144 planes in total.
Obviously this would mean that the parallelization would stop at (nodes*tasks_per_node)/planes = 1.
In CPMD there is an option to let multiple nodes divide the calculation associated with a single plane.
This setting is called CP_GROUPS.
When using CP_GROUPS the goal is still to have the same amount of planes per effective tasks.
Here effective tasks is the number of tasks divided with the amount of CP_GROUPS.</p>
<div class="math notranslate">
\[N_{\mathrm{effective\ tasks}} = \frac{N_{\mathrm{total\ tasks}}}{N{_{\mathrm{CP\_GROUPS}}}}\]</div>
<p>To ensure that the number of planes per process is the same, the following relation must be true:</p>
<div class="math notranslate">
\[\frac{N{_{\mathrm{CP\_GROUPS}}} N_{\mathrm{planes}}}{N_{\mathrm{total\ tasks}}} \mod 1 = 0\]</div>
<p>If CPMD have been compiled with OMP, OMP threading can be tried too.
The chosen number of OMP threads and MPI processes must be chosen such that:</p>
<div class="math notranslate">
\[N_{\mathrm{OMP\ threads}} N_{\mathrm{MPI\ processes}} = N_{\mathrm{total\ tasks}}\]</div>
<p>OMP threads can be set by:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">OMP_NUM_THREADS</span><span class="o">=</span><span class="n">X</span>
<span class="n">export</span> <span class="n">OMP_WAIT_POLICY</span><span class="o">=</span><span class="n">active</span>
</pre></div>
</div>
<p>OMP_WAIT_POLICY=active, ensures that the OMP threads are kept active.</p>
<div class="section" id="example-48-water">
<h4>Example - 48 Water<a class="headerlink" href="#example-48-water" title="Permalink to this headline">¶</a></h4>
<p>This example was benchmarked on the supercomputer Abacus 2.0 at the University of Southern Denmark.
On this architecture every node have 24 cores.
For this example of 48 water, the number of planes is 168.
Since 168 / 24 = 7, i.e. an integer, it could be thought that settings CP_GROUPS = number of nodes would be a good choice.
It can be identified that three different “sweet spots” exist.
Following the formula from the above section:</p>
<div class="math notranslate">
\[\frac{N{_{\mathrm{CP\_GROUPS}}} N_{\mathrm{planes}}}{N_{\mathrm{total\ tasks}}} \mod 1 = 0\]</div>
<div class="math notranslate">
\[\frac{1 \cdot 168}{7 \cdot 24} \mod 1  = 1 \mod 1 = 0\]</div>
<div class="math notranslate">
\[\frac{2 \cdot 168}{14 \cdot 24} \mod 1  = 1 \mod 1 = 0\]</div>
<div class="math notranslate">
\[\frac{3 \cdot 168}{21 \cdot 24} \mod 1  = 1 \mod 1 = 0\]</div>
<p>This indicates that 7, 14 and 21 would be a nice number of nodes.
Higher values of CP_GROUPS also gives integers for 7, 14 and 21 nodes.
Try the different values to make sure to know what is best.
For the following plots CP_GROUP = 1, 2, 3, 4 tried for all the nodes.</p>
<div class="figure">
<img alt="_images/Speedup_CP.svg" src="_images/Speedup_CP.svg" /></div>
<p>For Nodes = [1, 13] the best performance was for CP_GROUPS = 1.</p>
<p>For Nodes = [14, 20] the best performance was for CP_GROUPS = 2.</p>
<p>For Nodes = [21, 24] the best performance was for CP_GROUPS = 3.</p>
<p>This can be rationalized since it was found that 7, 14 and 21 nodes were the spots where the planes were evenly distributed.
If 8 nodes is used instead of 7, some of the processes just have to do less work, while most have to do the same.
The time per step is therefore ca. the same.
All the numbers between 7 and 14 will have the number of CP_GROUPS equal to that of 7, because 14 nodes is needed, for the CP_GROUPS to make a more even distribution of the planes.
For this specific system it seems like the best parallelization is for the minimal amount of CP_GROUPS that distributes the planes evenly.</p>
<div class="figure">
<img alt="_images/Efficiency_CP.svg" src="_images/Efficiency_CP.svg" /></div>
<p>In the efficiency plot the same story can be seen as in the speedup plot.
Here it can also be seen that 14 and 21 looks like they are good spots.</p>
</div>
</div>
</div>
<div class="section" id="vmd">
<h2>VMD<a class="headerlink" href="#vmd" title="Permalink to this headline">¶</a></h2>
<p>A section about some tricks for the <a class="reference external" href="http://www.ks.uiuc.edu/Research/vmd/">VMD</a> program.</p>
<div class="section" id="set-periodic-boundary-conditions">
<h3>Set periodic boundary conditions<a class="headerlink" href="#set-periodic-boundary-conditions" title="Permalink to this headline">¶</a></h3>
<p>Sometimes trajectories from programs does not include the information about the periodic boundary conditions.
For a cubic box this is easy to specify on via the TCL terminal.
This can be specified by the following two commands.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pbc</span> <span class="nb">set</span> <span class="p">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span><span class="p">}</span> <span class="o">-</span><span class="nb">all</span> <span class="o">-</span><span class="n">molid</span> <span class="n">top</span>
<span class="n">pbc</span> <span class="n">box</span> <span class="o">-</span><span class="n">center</span> <span class="n">origin</span> <span class="o">-</span><span class="n">shiftcenter</span> <span class="p">{</span><span class="n">cX</span> <span class="n">cY</span> <span class="n">cZ</span><span class="p">}</span>
</pre></div>
</div>
<p>The first command sets the size of the box for all frames.
“X”, “Y” and “Z” have to be specified in Angstrom.
The next command sets the origin of the box.
“cX”, “cY” and “cZ” is specified as the starting location of the box.
The default is just (0, 0, 0).</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="response.html" class="btn btn-neutral" title="Response Theory" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Erik Kjellgren.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>